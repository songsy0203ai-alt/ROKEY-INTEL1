<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>ðŸ”¥ FIRE ALARM</title>
  <style>
    body { margin:0; background:#120008; color:white; font-family: system-ui, sans-serif; }
    .wrap { display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; text-align:center; padding:16px; }
    h1 { font-size:64px; margin:0; letter-spacing:1px; }
    .sub { opacity:0.9; margin-top:16px; font-size:18px; }
    .box { margin-top:18px; background:rgba(255,255,255,0.08); padding:14px 16px; border-radius:14px; min-width: 320px; }
    .btn { margin-top:18px; padding:10px 16px; border-radius:12px; background:#ffffff; color:#000; border:none; cursor:pointer; font-weight:700;}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>ðŸ”¥ FIRE DETECTED</h1>
    <div class="box">
      <div class="sub" id="info">checking...</div>
    </div>
    <button class="btn" onclick="location.href='/'">ëŒ€ì‹œë³´ë“œë¡œ</button>
  </div>

<script>
async function poll(){
  const st = await fetch('/api/status').then(r=>r.json());
  const a = st.alarm || {};
  const fire = !!a.fire;
  const conf = Number(a.fire_conf || 0);
  const last = a.fire_last_ts || '-';

  document.getElementById('info').textContent =
    `conf=${conf.toFixed(2)} / last=${last}`;

  // fireê°€ êº¼ì§€ë©´ ëŒ€ì‹œë³´ë“œ ë³µê·€
  if (!fire){
    window.location.href = "/";
  }
}
setInterval(poll, 500);
poll();
</script>
</body>
</html>
